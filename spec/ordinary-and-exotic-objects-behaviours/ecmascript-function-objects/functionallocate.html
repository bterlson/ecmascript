<!doctype html>
<es-clause title="FunctionAllocate Abstract Operation" anchor="sec-functionallocate">
  <p>The abstract operation FunctionAllocate requires the two arguments <i>functionPrototype</i>
  and <i>strict</i>. It also accepts one optional argument, <es-nt>functionKind</es-nt>.
  FunctionAllocate performs the following steps:</p>

  <ol class="proc">
    <li><es-xref target="sec-algorithm-conventions">Assert</es-xref>: <es-xref target=
    "sec-ecmascript-data-types-and-values">Type</es-xref>(<i>functionPrototype</i>) is Object.</li>

    <li><es-xref target="sec-algorithm-conventions">Assert</es-xref>: If <i>functionKind</i> is
    present, its value is either "<code>normal</code>" or "<code>generator</code>".</li>

    <li>If <i>functionKind</i> is not present, then let <i>functionKind</i> be
    "<code>normal</code>".</li>

    <li>Let <i>F</i> be a newly created <es-xref target=
    "sec-ecmascript-function-objects">ECMAScript function object</es-xref> with the internal slots
    listed in <a href="#table-26">Table 26</a> . All of those internal slots are initialised to <b>
      undefined</b>.
    </li>

    <li>Set <i>F</i>’s essential internal methods except for [[GetOwnProperty]] to the default
    ordinary object definitions specified in <es-xref target=
    "sec-ordinary-object-internal-methods-and-internal-slots">9.1</es-xref>.</li>

    <li>If <i>strict</i> is <b>true</b>, set <i>F</i>’s [[GetOwnProperty]] internal method to the
    default ordinary object definitions specified in <es-xref target=
    "sec-ordinary-object-internal-methods-and-internal-slots">9.1</es-xref>.</li>

    <li>Else, set <i>F</i>’s [[GetOwnProperty]] internal method to the definitions specified in
    <es-xref target="sec-ecmascript-function-objects-getownproperty-p">9.2.2</es-xref>.</li>

    <li>Set <i>F</i>’s [[Call]] internal method to the definition specified in <es-xref target=
    "sec-construct-argumentslist">9.2.1</es-xref>.</li>

    <li>Set the [[Strict]] <es-xref target=
    "sec-object-internal-methods-and-internal-slots">internal slot</es-xref> of <i>F</i> to
    <i>strict</i>.</li>

    <li>Set the [[FunctionKind]] <es-xref target=
    "sec-object-internal-methods-and-internal-slots">internal slot</es-xref> of <i>F</i> to
    <i>functionKind</i>.</li>

    <li>Set the [[Prototype]] <es-xref target=
    "sec-object-internal-methods-and-internal-slots">internal slot</es-xref> of <i>F</i> to
    <i>functionPrototype</i>.</li>

    <li>Set the [[Extensible]] <es-xref target=
    "sec-object-internal-methods-and-internal-slots">internal slot</es-xref> of <i>F</i> to
    <b>true</b>.</li>

    <li>Set the [[Realm]] <es-xref target="sec-object-internal-methods-and-internal-slots">internal
    slot</es-xref> of <i>F</i> to <es-xref target="sec-execution-contexts">the running execution
    context</es-xref>’s <es-xref target="sec-code-realms">Realm</es-xref>.</li>

    <li>Return <i>F</i>.</li>
  </ol>
</es-clause>

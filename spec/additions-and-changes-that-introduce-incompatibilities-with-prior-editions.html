<es-clause title="Additions and Changes that Introduce Incompatibilities with Prior Editions"
anchor="sec-additions-and-changes-that-introduce-incompatibilities-with-prior-editions" annex
informative>
  <es-clause title="In the 6Edition" anchor="sec-in-the-6th-edition">
    <p>9: In Edition 6, Function calls are not allowed to return a <es-xref target=
    "sec-reference-specification-type">Reference</es-xref> value.</p>

    <p><es-xref target="sec-iteration-statements">13.6</es-xref>: In Edition 6, a terminating
    semi-colon is no longer required at the end of a do-while statement.</p>

    <p><es-xref target="sec-iteration-statements">13.6</es-xref>: Prior to Edition 6, an
    initialisation expression could appear as part of the <i>VariableDeclaration</i> that precedes
    the <code>in</code> keyword. The value of that expression was always discarded. In Edition 6,
    the <i>ForBind</i> in that same position does not allow the occurance of such an
    initialiser.</p>

    <p><es-xref target="sec-try-statement">13.14</es-xref>: In Edition 6, it is an early error for
    a <es-nt>Catch</es-nt> clause to contained a <code>var</code> declaration for the same
    <es-nt>Identifier</es-nt> that appears as the <es-nt>Catch</es-nt> clause parameter. In
    previous editions, such a variable declaration would be instantiated in the enclosing variable
    environment but the declaration’s <es-nt>Initialiser</es-nt> value would be assigned to the
    <es-nt>Catch</es-nt> parameter.</p>

    <p><es-xref target="sec-method-definitions">14.3</es-xref> In Edition 6, the function objects
    that are created as the values of the [[Get]] or [[Set]] attribute of accessor properties in an
    <es-nt>ObjectLiteral</es-nt> are not constructor functions. In Edition 5, they were
    constructors.</p>

    <p><es-xref target="sec-object.create">19.1.2.2</es-xref> and <es-xref target=
    "sec-object.defineproperties">19.1.2.3</es-xref>: In Edition 6, all property additions and
    changes are processed, even if one of them throws an exception. If an exception occurs during
    such processing, the first such exception is thrown after all propertie are processed. In
    Edition 5, processing of property additions and changes immediately terminated when the first
    exception occurred.</p>

    <p><es-xref target="sec-object.freeze">19.1.2.5</es-xref>: In Edition 6, if the argument to
    <code><es-xref target="sec-object.freeze">Object.freeze</es-xref></code> is not an object it is
    treated as if it was a non-extensible ordinary object with no own properties. In Edition 5, a
    non-object argument always causes a <span class="value">TypeError</span> to be thrown.</p>

    <p><es-xref target="sec-object.getownpropertydescriptor">19.1.2.6</es-xref>: In Edition 6, if
    the argument to <code><es-xref target=
    "sec-object.getownpropertydescriptor">Object.getOwnPropertyDescriptor</es-xref></code> is not
    an object an attempt is make to coerce the argument using <es-xref target=
    "sec-toobject">ToObject</es-xref>. If the coerecion is successful the result is used in place
    of the original argument value. In Edition 5, a non-object argument always causes a
    <span class="value">TypeError</span> to be thrown.</p>

    <p><es-xref target="sec-object.getownpropertynames">19.1.2.7</es-xref>: In Edition 6, if the
    argument to <code><es-xref target=
    "sec-object.getownpropertynames">Object.getOwnPropertyNames</es-xref></code> is not an object
    an attempt is make to coerce the argument using <es-xref target=
    "sec-toobject">ToObject</es-xref>. If the coerecion is successful the result is used in place
    of the original argument value. In Edition 5, a non-object argument always causes a
    <span class="value">TypeError</span> to be thrown.</p>

    <p><es-xref target="sec-object.getprototypeof">19.1.2.9</es-xref>: In Edition 6, if the
    argument to <code><es-xref target=
    "sec-object.getprototypeof">Object.getPrototypeOf</es-xref></code> is not an object an attempt
    is make to coerce the argument using <es-xref target="sec-toobject">ToObject</es-xref>. If the
    coerecion is successful the result is used in place of the original argument value. In Edition
    5, a non-object argument always causes a <b>TypeError</b> to be thrown.</p>

    <p><es-xref target="sec-object.isextensible">19.1.2.11</es-xref>: In Edition 6, if the argument
    to <code><es-xref target="sec-object.isextensible">Object.isExtensible</es-xref></code> is not
    an object it is treated as if it was a non-extensible ordinary object with no own properties.
    In Edition 5, a non-object argument always causes a <span class="value">TypeError</span> to be
    thrown.</p>

    <p><es-xref target="sec-object.isfrozen">19.1.2.12</es-xref>: In Edition 6, if the argument to
    <code><es-xref target="sec-object.isfrozen">Object.isFrozen</es-xref></code> is not an object
    it is treated as if it was a non-extensible ordinary object with no own properties. In Edition
    5, a non-object argument always causes a <span class="value">TypeError</span> to be thrown.</p>

    <p><es-xref target="sec-object.issealed">19.1.2.13</es-xref>: In Edition 6, if the argument to
    <code><es-xref target="sec-object.issealed">Object.isSealed</es-xref></code> is not an object
    it is treated as if it was a non-extensible ordinary object with no own properties. In Edition
    5, a non-object argument always causes a <span class="value">TypeError</span> to be thrown.</p>

    <p><es-xref target="sec-object.keys">19.1.2.14</es-xref>: In Edition 6, if the argument to
    <code><es-xref target="sec-object.keys">Object.keys</es-xref></code> is not an object an
    attempt is make to coerce the argument using <es-xref target="sec-toobject">ToObject</es-xref>.
    If the coerecion is successful the result is used in place of the original argument value. In
    Edition 5, a non-object argument always causes a <span class="value">TypeError</span> to be
    thrown.</p>

    <p><es-xref target="sec-object.preventextensions">19.1.2.15</es-xref>: In Edition 6, if the
    argument to <code><es-xref target=
    "sec-object.preventextensions">Object.preventExtensions</es-xref></code> is not an object it is
    treated as if it was a non-extensible ordinary object with no own properties. In Edition 5, a
    non-object argument always causes a <span class="value">TypeError</span> to be thrown.</p>

    <p><es-xref target="sec-object.seal">19.1.2.17</es-xref>: In Edition 6, if the argument to
    <code><es-xref target="sec-object.seal">Object.seal</es-xref></code> is not an object it is
    treated as if it was a non-extensible ordinary object with no own properties. In Edition 5, a
    non-object argument always causes a <span class="value">TypeError</span> to be thrown.</p>

    <p><es-xref target="sec-function-instances-length">19.2.4.1</es-xref>: In Edition 6, the
    <code>length</code> property of function instances is configurable. In previous editions it was
    non-configurable.</p>

    <p><es-xref target="sec-properties-of-the-boolean-prototype-object">19.3.3</es-xref> In Edition
    6, the Boolean prototype object is not a Boolean instance. In previous editions it was a
    Boolean instance whose Boolean value was <b>false</b>.</p>

    <p><es-xref target="sec-properties-of-the-number-prototype-object">20.1.3</es-xref> In Edition
    6, the Number prototype object is not a Number instance. In previous editions it was a Number
    instance whose number value was +0.</p>

    <p><es-xref target="sec-properties-of-the-date-prototype-object">20.3.4</es-xref> In Edition 6,
    the Date prototype object is not a Date instance. In previous editions it was a Date instance
    whose TimeValue was NaN.</p>

    <p><es-xref target="sec-properties-of-the-array-prototype-object">22.1.3</es-xref> In Edition
    6, the Array prototype object is not an Array instance. In previous editions it was an Array
    instance with a length property whose value was +0.</p>

    <p><es-xref target="sec-properties-of-the-string-prototype-object">21.1.3</es-xref> In Edition
    6, the String prototype object is not a String instance. In previous editions it was a String
    instance whose String value was the empty string.</p>

    <p><es-xref target="sec-string.prototype.tolowercase">21.1.3.22</es-xref> and <es-xref target=
    "sec-string.prototype.touppercase">21.1.3.24</es-xref> In Edition 6, lowercase/upper conversion
    processing operates on code points. In previous editions such the conversion processing was
    only applied to individual code units. The only affected code points are those in the Deseret
    block of Unicode</p>

    <p><es-xref target="sec-string.prototype.trim">21.1.3.25</es-xref> In Edition 6, the
    <code><es-xref target="sec-string.prototype.trim">String.prototype.trim</es-xref></code> method
    is defined to recognize white space code points that may exists outside of the Unicode BMP.
    However, as of Unicode 6.1 no such code points are defined. In previous editions such code
    points would not have been recognized as white space.</p>

    <p><es-xref target="sec-properties-of-the-regexp-prototype-object">21.2.5</es-xref> In Edition
    6, the RegExp prototype object is not a RegExp instance. In previous editions it was a RegExp
    instance whose pattern is the empty string.</p>

    <p><es-xref target="sec-properties-of-the-regexp-prototype-object">21.2.5</es-xref> In Edition
    6, <code>source</code>, <code>global</code>, <code>ignoreCase</code>, and
    <code>multiline</code> are accessor properties defined on the RegExp prototype object. In
    previous editions they were data properties defined on RegExp instances.</p>

    <p><es-xref target="sec-properties-of-the-array-prototype-object">22.1.3</es-xref> In Edition
    6, the Array prototype object is not an Array instance. In previous editions it was an Array
    instance with a length property whose value was +0.</p>
  </es-clause>

  <es-clause title="In the 5Edition" anchor="sec-in-the-5th-edition">
    <p>Clause references in this list refer to the clause numbers used in Edition 5 and
    <es-xref target="sec-syntactic-and-lexical-grammars">5.1</es-xref>.</p>

    <p><es-xref target="sec-type-conversion-and-testing">7.1</es-xref>: Unicode format control
    characters are no longer stripped from ECMAScript source text before processing. In Edition 5,
    if such a character appears in a <es-nt>StringLiteral</es-nt> or
    <es-nt>RegularExpressionLiteral</es-nt> the character will be incorporated into the literal
    where in Edition 3 the character would not be incorporated into the literal.</p>

    <p><es-xref target="sec-testing-and-comparison-operations">7.2</es-xref>: Unicode character
    &lt;BOM&gt; is now treated as whitespace and its presence in the middle of what appears to be
    an identifier could result in a syntax error which would not have occurred in Edition 3</p>

    <p><es-xref target="sec-operations-on-objects">7.3</es-xref>: Line terminator characters that
    are preceded by an escape sequence are now allowed within a string literal token. In Edition 3
    a syntax error would have been produced.</p>

    <p>: Regular expression literals now return a unique object each time the literal is evaluated.
    This change is detectable by any programs that test the object identity of such literal values
    or that are sensitive to the shared side effects.</p>

    <p>: Edition 5 requires early reporting of any possible RegExp constructor errors that would be
    produced when converting a <es-nt>RegularExpressionLiteral</es-nt> to a RegExp object. Prior to
    Edition 5 implementations were permitted to defer the reporting of such errors until the actual
    execution time creation of the object.</p>

    <p>: In Edition 5 unescaped “/” characters may appear as a <es-nt>CharacterClass</es-nt> in a
    regular expression literal. In Edition 3 such a character would have been interpreted as the
    final character of the literal.</p>

    <p>: In Edition 5, indirect calls to the <code>eval</code> function use <es-xref target=
    "sec-global-environment-records">the global environment</es-xref> as both the variable
    environment and <es-xref target="sec-lexical-environments">lexical environment</es-xref> for
    the eval code. In Edition 3, the variable and lexical environments of the caller of an indirect
    <code>eval</code> was used as the environments for the eval code.</p>

    <p>: In Edition 5 all methods of <code>Array.prototype</code> are intentionally generic. In
    Edition 3 <code>toString</code> and <code>toLocaleString</code> were not generic and would
    throw a <code>TypeError</code> exception if applied to objects that were not instances of
    Array.</p>

    <p>: In Edition 5 the array indexed properties of argument objects that correspond to actual
    formal parameters are enumerable. In Edition 3, such properties were not enumerable.</p>

    <p>: In Edition 5 the value of the [[Class]] <es-xref target=
    "sec-object-internal-methods-and-internal-slots">internal slot</es-xref> of an arguments object
    is <code>"Arguments"</code>. In Edition 3, it was <code>"Object"</code>. This is observable if
    <code>toString</code> is called as a method of an arguments object.</p>

    <p><es-xref target="sec-subtraction-operator-minus">12.6.4</es-xref>: for-in statements no
    longer throw a <b>TypeError</b> if the <code>in</code> expression evaluates to <b>null</b> or
    <b>undefined</b>. Instead, the statement behaves as if the value of the expression was an
    object with no enumerable properties.</p>

    <p>15: In Edition 5, the following new properties are defined on built-in objects that exist in
    Edition 3: <code><es-xref target=
    "sec-object.getprototypeof">Object.getPrototypeOf</es-xref></code>, <code><es-xref target=
    "sec-object.getownpropertydescriptor">Object.getOwnPropertyDescriptor</es-xref></code>,
    <code><es-xref target=
    "sec-object.getownpropertynames">Object.getOwnPropertyNames</es-xref></code>,
    <b><es-xref target="sec-object.create">Object.create</es-xref>,</b> <code><es-xref target=
    "sec-object.defineproperty">Object.defineProperty</es-xref></code>, <code><es-xref target=
    "sec-object.defineproperties">Object.defineProperties</es-xref></code>, <code><es-xref target=
    "sec-object.seal">Object.seal</es-xref></code>, <code><es-xref target=
    "sec-object.freeze">Object.freeze</es-xref></code>, <code><es-xref target=
    "sec-object.preventextensions">Object.preventExtensions</es-xref></code>,
    <code><es-xref target="sec-object.issealed">Object.isSealed</es-xref></code>,
    <code><es-xref target="sec-object.isfrozen">Object.isFrozen</es-xref></code>,
    <code><es-xref target="sec-object.isextensible">Object.isExtensible</es-xref></code>,
    <code><es-xref target="sec-object.keys">Object.keys</es-xref></code>, <code><es-xref target=
    "sec-function.prototype.bind">Function.prototype.bind</es-xref></code>, <code><es-xref target=
    "sec-array.prototype.indexof">Array.prototype.indexOf</es-xref></code>, <code><es-xref target=
    "sec-array.prototype.lastindexof">Array.prototype.lastIndexOf</es-xref></code>,
    <code><es-xref target="sec-array.prototype.every">Array.prototype.every</es-xref></code>,
    <code><es-xref target="sec-array.prototype.some">Array.prototype.some</es-xref></code>,
    <code><es-xref target="sec-array.prototype.foreach">Array.prototype.forEach</es-xref></code>,
    <code><es-xref target="sec-array.prototype.map">Array.prototype.map</es-xref></code>,
    <code><es-xref target="sec-array.prototype.filter">Array.prototype.filter</es-xref></code>,
    <code><es-xref target="sec-array.prototype.reduce">Array.prototype.reduce</es-xref></code>,
    <code><es-xref target=
    "sec-array.prototype.reduceright">Array.prototype.reduceRight</es-xref></code>,
    <code><es-xref target="sec-string.prototype.trim">String.prototype.trim</es-xref></code>,
    <code><es-xref target="sec-date.now">Date.now</es-xref></code>, <code><es-xref target=
    "sec-date.prototype.toisostring">Date.prototype.toISOString</es-xref>, <es-xref target=
    "sec-date.prototype.tojson">Date.prototype.toJSON</es-xref></code>.</p>

    <p>15: Implementations are now required to ignore extra arguments to standard built-in methods
    unless otherwise explicitly specified. In Edition 3 the handling of extra arguments was
    unspecified and implementations were explicitly allowed to throw a <b>TypeError</b>
    exception.</p>

    <p><es-xref target="sec-scripts-static-semantics-early-errors">15.1.1</es-xref>: The value
    properties <b>NaN</b>, <b>Infinity</b>, and <b>undefined</b> of the Global Object have been
    changed to be read-only properties.</p>

    <p>15.1.2.1. Implementations are no longer permitted to restrict the use of eval in ways that
    are not a direct call. In addition, any invocation of eval that is not a direct call uses
    <es-xref target="sec-global-environment-records">the global environment</es-xref> as its
    variable environment rather than the caller’s variable environment.</p>

    <p>: The specification of the function <code>parseInt</code> no longer allows implementations
    to treat Strings beginning with a <code>0</code> character as octal values.</p>

    <p>: In Edition 3, a <b>TypeError</b> is thrown if the second argument passed to
    <code><es-xref target="sec-function.prototype.apply">Function.prototype.apply</es-xref></code>
    is neither an array object nor an arguments object. In Edition 5, the second argument may be
    any kind of generic array-like object that has a valid <code>length</code> property.</p>

    <p>,&nbsp;15.3.3.4: In Edition 3 passing <b>undefined</b> or <b>null</b> as the first argument
    to either <code><es-xref target=
    "sec-function.prototype.apply">Function.prototype.apply</es-xref></code> or
    <code><es-xref target="sec-function.prototype.call">Function.prototype.call</es-xref></code>
    causes the global object to be passed to the indirectly invoked target function as the
    <b>this</b> value. If the first argument is a primitive value the result of calling
    <es-xref target="sec-toobject">ToObject</es-xref> on the primitive value is passed as the
    <b>this</b> value. In Edition 5, these transformations are not performed and the actual first
    argument value is passed as the <b>this</b> value. This difference will normally be
    unobservable to existing ECMAScript Edition 3 code because a corresponding transformation takes
    place upon activation of the target function. However, depending upon the implementation, this
    difference may be observable by host object functions called using <code>apply</code> or
    <code>call</code>. In addition, invoking a standard built-in function in this manner with
    <b>null</b> or <b>undefined</b> passed as the <b>this</b> value will in many cases cause
    behaviour in Edition 5 implementations that differ from Edition 3 behaviour. In particular, in
    Edition 5 built-in functions that are specified to actually use the passed <b>this</b> value as
    an object typically throw a <b>TypeError</b> exception if passed <b>null</b> or
    <b>undefined</b> as the <b>this</b> value.</p>

    <p>: In Edition 5, the <code>prototype</code> property of Function instances is not enumerable.
    In Edition 3, this property was enumerable.</p>

    <p>: In Edition 5, the individual characters of a String object’s [[StringData]] may be
    accessed as array indexed properties of the String object. These properties are non-writable
    and non-configurable and shadow any inherited properties with the same names. In Edition 3,
    these properties did not exist and ECMAScript code could dynamically add and remove writable
    properties with such names and could access inherited properties with such names.</p>

    <p>: <code><es-xref target="sec-date.parse">Date.parse</es-xref></code> is now required to
    first attempt to parse its argument as an ISO format string. Programs that use this format but
    depended upon implementation specific behaviour (including failure) may behave differently.</p>

    <p>: In Edition 5, <code>\s</code> now additionally matches &lt;BOM&gt;.</p>

    <p>: In Edition 3, the exact form of the String value of the <code>source</code> property of an
    object created by the <code>RegExp</code> constructor is implementation defined. In Edition 5,
    the String must conform to certain specified requirements and hence may be different from that
    produced by an Edition 3 implementation.</p>

    <p>: In Edition 3, the result of <code><es-xref target=
    "sec-regexp.prototype.tostring">RegExp.prototype.toString</es-xref></code> need not be derived
    from the value of the RegExp object’s <code>source</code> property. In Edition 5 the result
    must be derived from the <code>source</code> property in a specified manner and hence may be
    different from the result produced by an Edition 3 implementation.</p>

    <p>, : In Edition 5, if an initial value for the <code>message</code> property of an Error
    object is not specified via the <code>Error</code> constructor the initial value of the
    property is the empty String. In Edition 3, such an initial value is implementation
    defined.</p>

    <p>: In Edition 3, the result of <code><es-xref target=
    "sec-error.prototype.tostring">Error.prototype.toString</es-xref></code> is implementation
    defined. In Edition 5, the result is fully specified and hence may differ from some Edition 3
    implementations.</p>

    <p>: In Edition 5, the name <code>JSON</code> is defined in <es-xref target=
    "sec-global-environment-records">the global environment</es-xref>. In Edition 3, testing for
    the presence of that name will show it to be <b>undefined</b> unless it is defined by the
    program or implementation.</p>
  </es-clause>
</es-clause>

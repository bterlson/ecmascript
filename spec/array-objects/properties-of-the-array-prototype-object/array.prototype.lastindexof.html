<es-clause title="Array.prototype.lastIndexOf ( searchElement [ , fromIndex ] )" anchor=
"sec-array.prototype.lastindexof">
  <p><code>lastIndexOf</code> compares <es-nt>searchElement</es-nt> to the elements of the array in
  descending order using the Strict Equality Comparison algorithm (<es-xref target=
  "sec-strict-equality-comparison">7.2.10</es-xref>), and if found at one or more positions,
  returns the index of the last such position; otherwise, -1 is returned.</p>

  <p>The optional second argument <es-nt>fromIndex</es-nt> defaults to the array's length minus one
  (i.e. the whole array is searched). If it is greater than or equal to the length of the array,
  the whole array will be searched. If it is negative, it is used as the offset from the end of the
  array to compute <es-nt>fromIndex</es-nt>. If the computed index is less than 0, -1 is
  returned.</p>

  <p>When the <code>lastIndexOf</code> method is called with one or two arguments, the following
  steps are taken:</p>

  <ol class="proc">
    <li>Let <i>O</i> be the result of calling <es-xref target="sec-toobject">ToObject</es-xref>
    passing the <b>this</b> value as the argument.</li>

    <li><es-xref target="sec-returnifabrupt">ReturnIfAbrupt</es-xref>(<i>O</i>).</li>

    <li>Let <i>lenValue</i> be the result of <es-xref target="sec-get-o-p">Get</es-xref>(<i>O</i>,
    <code>"length"</code>)</li>

    <li>Let <i>len</i> be <es-xref target="sec-tolength">ToLength</es-xref>(<i>lenValue</i>).</li>

    <li><es-xref target="sec-returnifabrupt">ReturnIfAbrupt</es-xref>(<i>len</i>).</li>

    <li>If <i>len</i> is 0, return -1.</li>

    <li>If argument <i>fromIndex</i> was passed let <i>n</i> be <es-xref target=
    "sec-tointeger">ToInteger</es-xref>(<i>fromIndex</i>); else let <i>n</i> be <i>len</i>-1.</li>

    <li><es-xref target="sec-returnifabrupt">ReturnIfAbrupt</es-xref>(<i>n</i>).</li>

    <li>If <i>n</i> ≥ 0, then let <i>k</i> be min(<i>n</i>, <i>len</i> – 1).</li>

    <li>Else <i>n</i> &lt; 0,

      <ol class="block">
        <li>Let <i>k</i> be <i>len</i> - <es-xref target=
        "sec-algorithm-conventions">abs</es-xref>(<i>n</i>).</li>
      </ol>
    </li>

    <li>Repeat, while <i>k</i>≥ 0

      <ol class="block">
        <li>Let <i>kPresent</i> be the result of <es-xref target=
        "sec-hasproperty">HasProperty</es-xref>(<i>O</i>, <es-xref target=
        "sec-tostring">ToString</es-xref>(<i>k</i>)).</li>

        <li><es-xref target="sec-returnifabrupt">ReturnIfAbrupt</es-xref>(<i>kPresent</i>).</li>

        <li>If <i>kPresent</i> is <b>true</b>, then

          <ol class="block">
            <li>Let <i>elementK</i> be the result of <es-xref target=
            "sec-get-o-p">Get</es-xref>(<i>O</i>, <es-xref target=
            "sec-tostring">ToString</es-xref>(<i>k</i>)).</li>

            <li><es-xref target=
            "sec-returnifabrupt">ReturnIfAbrupt</es-xref>(<i>elementK</i>).</li>

            <li>Let <i>same</i> be the result of performing Strict Equality Comparison<br>
            <i>searchElement</i> === <i>elementK</i>.</li>

            <li>If <i>same</i> is <b>true,</b> return <i>k</i>.</li>
          </ol>
        </li>

        <li>Decrease <i>k</i> by 1.</li>
      </ol>
    </li>

    <li>Return -1.</li>
  </ol>

  <p>The <code>length</code> property of the <code>lastIndexOf</code> method is <b>1</b>.</p>

  <es-note>
    <p>The <code>lastIndexOf</code> function is intentionally generic; it does not require that its
    <b>this</b> value be an Array object. Therefore it can be transferred to other kinds of objects
    for use as a method. Whether the <code>lastIndexOf</code> function can be applied successfully
    to an exotic object that is not an Array is implementation-dependent.</p>
  </es-note>
</es-clause>
